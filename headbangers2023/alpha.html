<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>

    <title>Headbangers boat 2023 Alpha</title>

    <script id='scheduleDay1' type='text'>
        1test band name1, PD, Oct, 31, 12:31, PM, Oct, 31, 12:59, PM
        2test band name2, PD, Oct, 31,  1:01, PM, Oct, 31,  3:01, PM
        3test band name3, RT, Oct, 31,  1:31, PM, Oct, 31,  2:01, PM
        4test band name4, RT, Oct, 31, 11:59, PM, Nov,  1,  2:01, AM
        1test band name1, SB, Oct, 31, 12:31, PM, Oct, 31,  1:01, PM
    </script>
    <script id='scheduleDay2' type='text'>
        2test band name2, SB, Nov, 1,  9:02, PM,  Nov, 1,  10:02, PM
        3test band name3, SL, Nov, 1,  1:32, PM,  Nov, 1,  2:02, PM
        4test band name4, SB, Nov, 1, 11:52, PM,  Nov, 2,  2:02, AM
    </script>
    <script id='scheduleDay3' type='text'>
        2test band name2, PD, Nov, 2,  1:03, PM,  Nov, 2,  3:03, PM
        3test band name3, RT, Nov, 2,  1:33, PM,  Nov, 2,  2:03, PM
        4test band name4, RT, Nov, 2, 11:53, PM,  Nov, 3,  2:03, AM
    </script>

    <script id='scheduleDay4' type='text'>
        2test band name2, PD, Nov, 3,  1:04, PM,  Nov, 3,  3:04, PM
        3test band name3, RT, Nov, 3,  1:34, PM,  Nov, 3,  2:04, PM
        4test band name4, RT, Nov, 3, 11:54, PM,  Nov, 4,  2:04, AM
    </script>
    <script type="text/javascript">
        let allEvents = [];
        //TODO bunch of common code with index.html
        function getDateTime(year, month, day, time, AMPM) {

            var dateString = day + " " + month + " " + year + " " + time + ":00" + " " + AMPM;

            var date = new Date(Date.parse(dateString));
            return date;
        }

        function primeData() {

            for (var dayIndex = 1; dayIndex <= 4; dayIndex++) {
                var currentEvents = document.getElementById('scheduleDay' + dayIndex).innerHTML;
                var eventsSplit = currentEvents.split("\n");

                var earliestStart = getDateTime("2100", "Jan", "1", "1:00", "AM");
                var latestEnd = getDateTime("2000", "Jan", "1", "1:00", "AM");
                var earliestEvent;
                var latestEvent;
                for (let i = 0; i < eventsSplit.length; i++) {

                    if (!eventsSplit[i] || eventsSplit[i].trim() == "") {
                        continue;
                    }
                    var eventWithDay = eventsSplit[i] + "," + dayIndex;
                    var event = getEventFromCommas(eventWithDay);


                    allEvents.push(event);

                }

            }

            allEvents = allEvents.sort((a, b) => {
                if (a.name > b.name) {
                    return 1;
                } else if (a.name < b.name) {
                    return -1;
                } else {
                    if (a.day > b.day) {
                        return 1;
                    }
                    else if (a.day < b.day) {
                        return -1;
                    }
                    else {
                        if (a.location > b.location) {
                            return 1;
                        }
                        else if (a.location < b.location) {
                            return -1;
                        }
                        else {
                            return 0;
                        }
                    }
                }

            });

        }

        function getEventFromCommas(eventWithDay) {
            var eventSplit = eventWithDay.split(",");
            Object.keys(eventSplit).forEach(k => eventSplit[k] = eventSplit[k].trim());
            var event = {
                name: eventSplit[0],
                location: eventSplit[1],
                startMonth: eventSplit[2],
                startDay: eventSplit[3],
                startTime: eventSplit[4],
                startAMPM: eventSplit[5],
                endMonth: eventSplit[6],
                endDay: eventSplit[7],
                endTime: eventSplit[8],
                endAMPM: eventSplit[9],
                day: eventSplit[10]
            };
            return event;
        }

        function drawAlpha() {
            primeData();
            var topDiv = document.getElementById('topDiv');

            topDiv.style.height = (window.innerHeight - 200) + "px";
            labelWidth = Math.floor((window.innerWidth - 55) / 4) + "px";


            for (let i = 0; i < allEvents.length; i++) {
                event = allEvents[i];
                var label = document.createElement("textarea");
                label.style.backgroundColor = 'lightgrey';
                label.style.width = labelWidth;
                label.style.height = "250px";
                label.style.fontSize = "30px";
                label.innerHTML = event.name + "\nDay " + event.day + "\n" + event.startTime + event.startAMPM + "-" + event.endTime + event.endAMPM;
                topDiv.appendChild(label);
            }

        }

        function bottomButton() {
            window.location.assign("./index.html");
        }

    </script>

</head>

<body onload="drawAlpha();">
    <style>
        body {
            margin: 0;
        }


        .button {
            border: none;
            padding: 15px 32px;
            text-align: center;
            color: black;
            text-decoration: none;
            display: inline-block;
            font-size: 60px;
            margin: 4px 2px;
            cursor: pointer;
            background-color: gold;
            border-radius: 12px;
            height: 200px;
            box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        }
    </style>

    <div id="topDiv" style="overflow:scroll; height:500px;">
    </div>

    <div id="bottomDiv">
        <button type="button" onclick="bottomButton()" id="bottomButton" class="button"
            style="background-color:hotpink;">Time</button>
    </div>

</body>

</html>